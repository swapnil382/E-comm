{"ast":null,"code":"var _jsxFileName = \"C:\\\\Swapnil\\\\E-commerce_react\\\\projfrontend\\\\src\\\\core\\\\StripeCheckout.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { isAutheticated } from \"../auth/helper\";\nimport { cartEmpty, loadcart } from \"./helper/CartHelper\";\nimport StripCheckoutButton from \"react-stripe-checkout\";\nimport { API } from \"../backend\";\n\nconst StripeCheckout = ({\n  products,\n  setReload = f => f,\n  reload = undefined\n}) => {\n  const [data, setData] = useState({\n    loading: false,\n    success: false,\n    error: \"\",\n    address: \"\"\n  });\n  const token = isAutheticated() && isAutheticated().token;\n\n  const userId = isAutheticated() && isAutheticated().user._id;\n\n  const getFinalAmount = () => {\n    let amount = 0;\n    products.map(p => {\n      amount = amount + p.price;\n    });\n    return amount;\n  };\n\n  const makePayment = token => {\n    const body = {\n      token,\n      products\n    };\n  };\n\n  const showStripeButton = () => {\n    return isAutheticated() ? React.createElement(StripCheckoutButton, {\n      stripeKey: \"\",\n      token: makePayment,\n      amount: getFinalAmount() * 100,\n      name: \"Buy Product\",\n      shippingAddress: true,\n      billingAddress: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Pay with stripe\")) : React.createElement(Link, {\n      to: \"/signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"Signin\"));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"text-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"strip checkout \", getFinalAmount()), showStripeButton());\n};\n\nexport default StripeCheckout;","map":{"version":3,"sources":["C:/Swapnil/E-commerce_react/projfrontend/src/core/StripeCheckout.js"],"names":["React","useState","useEffect","Link","isAutheticated","cartEmpty","loadcart","StripCheckoutButton","API","StripeCheckout","products","setReload","f","reload","undefined","data","setData","loading","success","error","address","token","userId","user","_id","getFinalAmount","amount","map","p","price","makePayment","body","showStripeButton"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,qBAApC;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,SAASC,GAAT,QAAoB,YAApB;;AAGA,MAAMC,cAAc,GAAG,CAAC;AAACC,EAAAA,QAAD;AAAUC,EAAAA,SAAS,GAAGC,CAAC,IAAIA,CAA3B;AAA8BC,EAAAA,MAAM,GAAEC;AAAtC,CAAD,KAAsD;AAErE,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC;AAC7BgB,IAAAA,OAAO,EAAC,KADqB;AAE7BC,IAAAA,OAAO,EAAC,KAFqB;AAG7BC,IAAAA,KAAK,EAAC,EAHuB;AAI7BC,IAAAA,OAAO,EAAC;AAJqB,GAAD,CAAhC;AAOA,QAAMC,KAAK,GAAGjB,cAAc,MAAMA,cAAc,GAAGiB,KAAnD;;AACA,QAAMC,MAAM,GAAGlB,cAAc,MAAMA,cAAc,GAAGmB,IAAjB,CAAsBC,GAAzD;;AAEA,QAAMC,cAAc,GAAG,MAAK;AACxB,QAAIC,MAAM,GAAG,CAAb;AACAhB,IAAAA,QAAQ,CAACiB,GAAT,CAAaC,CAAC,IAAI;AACdF,MAAAA,MAAM,GAAGA,MAAM,GAAGE,CAAC,CAACC,KAApB;AACH,KAFD;AAGA,WAAOH,MAAP;AACH,GAND;;AAQA,QAAMI,WAAW,GAAGT,KAAD,IAAW;AAC1B,UAAMU,IAAI,GAAE;AACRV,MAAAA,KADQ;AAERX,MAAAA;AAFQ,KAAZ;AAIH,GALD;;AAOA,QAAMsB,gBAAgB,GAAG,MAAM;AAC3B,WAAO5B,cAAc,KACjB,oBAAC,mBAAD;AACA,MAAA,SAAS,EAAC,EADV;AAEA,MAAA,KAAK,EAAE0B,WAFP;AAGA,MAAA,MAAM,EAAEL,cAAc,KAAK,GAH3B;AAIA,MAAA,IAAI,EAAC,aAJL;AAKA,MAAA,eAAe,MALf;AAMA,MAAA,cAAc,MANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQA;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBARA,CADiB,GAYjB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAZJ;AAgBH,GAjBD;;AAmBJ,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA4CA,cAAc,EAA1D,CADJ,EAEKO,gBAAgB,EAFrB,CADJ;AAMH,CApDD;;AAsDA,eAAevB,cAAf","sourcesContent":["import React,{useState,useEffect} from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { isAutheticated } from \"../auth/helper\"\r\nimport { cartEmpty, loadcart } from \"./helper/CartHelper\"\r\nimport StripCheckoutButton from \"react-stripe-checkout\"\r\nimport { API } from \"../backend\"\r\n\r\n\r\nconst StripeCheckout = ({products,setReload = f => f, reload= undefined}) => {\r\n\r\n        const [data, setData] = useState({\r\n            loading:false,\r\n            success:false,\r\n            error:\"\",\r\n            address:\"\"\r\n        })\r\n\r\n        const token = isAutheticated() && isAutheticated().token\r\n        const userId = isAutheticated() && isAutheticated().user._id\r\n\r\n        const getFinalAmount = () =>{\r\n            let amount = 0;\r\n            products.map(p => {\r\n                amount = amount + p.price;\r\n            })\r\n            return amount\r\n        }\r\n\r\n        const makePayment =(token) => {\r\n            const body ={\r\n                token,\r\n                products\r\n            }\r\n        }\r\n\r\n        const showStripeButton = () => {\r\n            return isAutheticated () ? (\r\n                <StripCheckoutButton\r\n                stripeKey=\"\"\r\n                token={makePayment}\r\n                amount={getFinalAmount() * 100}\r\n                name=\"Buy Product\"\r\n                shippingAddress\r\n                billingAddress\r\n                >\r\n                <button className=\"btn btn-success\">Pay with stripe</button>\r\n                </StripCheckoutButton>\r\n            ) : (\r\n                <Link to=\"/signin\">\r\n                    <button className=\"btn btn-warning\">Signin</button>\r\n                </Link>\r\n            )\r\n        }\r\n\r\n    return(\r\n        <div>\r\n            <h1 className=\"text-white\" >strip checkout {getFinalAmount()}</h1>\r\n            {showStripeButton()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StripeCheckout"]},"metadata":{},"sourceType":"module"}